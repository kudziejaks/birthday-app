<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TotallySam's Birthday Bash ‚Äî App</title>
  <style>
    :root{--pink:#ff8fc3;--white:#ffffff;--bg:#ffe6f2}
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, Arial, sans-serif;background:var(--bg);margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
    .app{width:100%;max-width:1100px;background:#fff;border-radius:16px;box-shadow:0 12px 30px rgba(0,0,0,0.12);overflow:hidden}
    header{padding:28px 30px;background:linear-gradient(90deg,var(--pink),#ffd6e8);color:#4a1033}
    header h1{margin:0;font-size:1.6rem}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:24px;padding:24px}
    .card{background:#ffffff;border-radius:12px;padding:18px;box-shadow:0 6px 16px rgba(0,0,0,0.06);margin-bottom:16px}
    label{display:block;margin-top:12px;font-size:0.9rem}
    input,select{width:100%;padding:10px;border-radius:8px;border:1px solid #e3d0db;margin-top:6px}
    button{margin-top:14px;padding:10px 14px;border-radius:10px;border:none;background:var(--pink);color:#4a1033;font-weight:700;cursor:pointer}
    .guest-list{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .guest{background:#fff0f6;padding:6px 10px;border-radius:999px;border:1px solid #ffd9ec}
    .hidden{display:none}
    .admin-box div{margin:4px 0;font-size:0.9rem}
    footer{padding:12px;text-align:center;color:#6a4a61}
  </style>
</head>
<body>

<div class="app">
<header>
  <h1>Welcome to TotallySam's Birthday Bash!</h1>
  <div class="small">Age allowed: 15‚Äì20 ‚Ä¢ Dress code: Pink or White ‚Ä¢ Only invited guests allowed</div>
</header>

<div class="grid">
  <!-- LEFT SIDE -->
  <div>
    <div class="card">
      <h2>Login</h2>

      <label>Name</label>
      <input type="text" id="loginName" placeholder="Enter your name" />

      <label>Password</label>
      <input type="password" id="loginPass" placeholder="App password" />

      <button id="loginBtn">Login</button>

      <p id="status">Not logged in</p>

      <h3>Guest List</h3>
      <div id="guestList" class="guest-list"></div>
    </div>

    <!-- ADMIN PANEL -->
    <div class="card">
      <h2>Admin ‚Äî Invitation Responses</h2>
      <div class="admin-box">
        <strong>Accepted:</strong>
        <div id="acceptedList"></div>

        <strong>Denied:</strong>
        <div id="deniedList"></div>

        <strong>Cancelled:</strong>
        <div id="cancelledList"></div>
      </div>
    </div>
  </div>

  <!-- RIGHT SIDE -->
  <div>
    <div class="card">
      <h2>Entry Check</h2>
      <p>You are logged in as: <strong id="visitorName">‚Äî</strong></p>

      <label>Age</label>
      <input type="number" id="age" />

      <label>Wearing</label>
      <select id="wear">
        <option value="">Select‚Ä¶</option>
        <option value="pink">Pink</option>
        <option value="white">White</option>
        <option value="pink_white">Pink & White</option>
      </select>

      <button id="enterBtn">Try Enter</button>
      <button id="logoutBtn" class="hidden">Logout</button>

      <p id="entryMsg"></p>
    </div>

    <div class="card">
      <h2>RSVP ‚Äî Invitation Response</h2>
      <button id="acceptBtn">Accept Invite</button>
      <button id="denyBtn">Deny Invite</button>
      <button id="cancelBtn" class="hidden">Cancel Acceptance</button>
      <p id="rsvpMsg"></p>
    </div>
  </div>
</div>

<footer>Made with ‚ù§Ô∏è by TotallySam</footer>
</div>

<script>
// FINAL GUEST LIST
const allowedNames = [
  'Tino','Camilla','Jeanelle','Maria','Kelly','Primily','Blessing','Days',
  'Tanatwsa','Candice','Prince','Maka','FIRM','Stra','Kudakwashe','Angel',
  'Shumie','Tawana','Tadiwa','Sky','Ashley','Chiko','Tatenda','Samantha','Kudzi'
];

// Demo password
const APP_PASSWORD = 'party2025';

// DOM references
const guestListEl = document.getElementById('guestList');
const loginBtn = document.getElementById('loginBtn');
const loginNameEl = document.getElementById('loginName');
const loginPassEl = document.getElementById('loginPass');
const statusEl = document.getElementById('status');
const visitorNameEl = document.getElementById('visitorName');
const logoutBtn = document.getElementById('logoutBtn');
const entryMsg = document.getElementById('entryMsg');
const ageEl = document.getElementById('age');
const wearEl = document.getElementById('wear');
const enterBtn = document.getElementById('enterBtn');

// RSVP
const acceptBtn = document.getElementById('acceptBtn');
const denyBtn = document.getElementById('denyBtn');
const cancelBtn = document.getElementById('cancelBtn');
const rsvpMsg = document.getElementById('rsvpMsg');

const acceptedList = document.getElementById('acceptedList');
const deniedList   = document.getElementById('deniedList');
const cancelledList = document.getElementById('cancelledList');

// Populate guest tags
allowedNames.forEach(n=>{
  let s=document.createElement('span');
  s.className='guest';
  s.textContent=n;
  guestListEl.appendChild(s);
});

// RSVP data stored locally
function loadRSVP(){
  return JSON.parse(localStorage.getItem('rsvp_data')||'{}');
}
function saveRSVP(data){
  localStorage.setItem('rsvp_data',JSON.stringify(data));
}
function updateAdminView(){
  const data = loadRSVP();
  acceptedList.textContent = Object.keys(data).filter(k=>data[k]==='accepted').join(', ');
  deniedList.textContent = Object.keys(data).filter(k=>data[k]==='denied').join(', ');
  cancelledList.textContent = Object.keys(data).filter(k=>data[k]==='cancelled').join(', ');
}

// Login session
function saveSession(name){
  localStorage.setItem('session',name);
}
function getSession(){
  return localStorage.getItem('session');
}
function clearSession(){
  localStorage.removeItem('session');
}

// Set login state
function setLoggedIn(name){
  statusEl.textContent = "Logged in as " + name;
  visitorNameEl.textContent = name;
  logoutBtn.classList.remove('hidden');
  saveSession(name);

  // Show cancel button if they had accepted
  const r = loadRSVP()[name];
  cancelBtn.classList.toggle('hidden', r!=='accepted');
}
function setLoggedOut(){
  statusEl.textContent = "Not logged in";
  visitorNameEl.textContent = "‚Äî";
  logoutBtn.classList.add('hidden');
  clearSession();
}

// Restore session on page load
if(getSession() && allowedNames.includes(getSession())){
  setLoggedIn(getSession());
}

// Login button
loginBtn.onclick = () => {
  let name = loginNameEl.value.trim();
  let pass = loginPassEl.value;
  if(!allowedNames.includes(name)){ alert("Not on guest list"); return; }
  if(pass !== APP_PASSWORD){ alert("Wrong password"); return; }
  setLoggedIn(name);
};

// Logout
logoutBtn.onclick = ()=>{
  setLoggedOut();
};

// Entry check
enterBtn.onclick = ()=>{
  let name = getSession();
  if(!name){ entryMsg.textContent="Login first"; return; }

  let age = Number(ageEl.value);
  let wear = wearEl.value;

  if(age < 15 || age > 20){
    entryMsg.textContent="Age not allowed.";
    entryMsg.style.color="red";
    return;
  }
  if(!(wear==='pink'||wear==='white'||wear==='pink_white')){
    entryMsg.textContent="Dress code failed.";
    entryMsg.style.color="red";
    return;
  }

  entryMsg.textContent="Access granted! üéâ";
  entryMsg.style.color="green";
};

// RSVP actions
acceptBtn.onclick = ()=>{
  const n = getSession();
  if(!n){ rsvpMsg.textContent="Login first"; return; }

  let data = loadRSVP();
  data[n] = "accepted";
  saveRSVP(data);
  updateAdminView();

  rsvpMsg.textContent="You have accepted the invitation! üéâ";
  cancelBtn.classList.remove('hidden');
};

denyBtn.onclick = ()=>{
  const n = getSession();
  if(!n){ rsvpMsg.textContent="Login first"; return; }

  let data = loadRSVP();
  data[n] = "denied";
  saveRSVP(data);
  updateAdminView();

  rsvpMsg.textContent="You have denied the invitation.";
  cancelBtn.classList.add('hidden');
};

cancelBtn.onclick = ()=>{
  const n = getSession();
  let data = loadRSVP();
  data[n] = "cancelled";
  saveRSVP(data);
  updateAdminView();

  rsvpMsg.textContent="Your acceptance has been cancelled.";
  cancelBtn.classList.add('hidden');
};

// Initialize admin view
updateAdminView();
</script>

</body>
</html>
